<UserControl
    x:Class="StockSharp.Xaml.UnitEditor"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:dxe="clr-namespace:DevExpress.Xpf.Editors;assembly=DevExpress.Xpf.Core.v20.1"
    xmlns:local="clr-namespace:StockSharp.Xaml">
    <FrameworkElement.Resources>
        <local:MyUnitConverter x:Key="UnitConverter" />
    </FrameworkElement.Resources>
    <dxe:TextEdit
        HorizontalContentAlignment="Right"
        BorderBrush="{Binding RelativeSource={RelativeSource AncestorType={x:Type local:UnitEditor}}, Path=BorderBrush}"
        BorderThickness="{Binding RelativeSource={RelativeSource AncestorType={x:Type local:UnitEditor}}, Path=BorderThickness}">
        <dxe:TextEditBase.Text>
            <Binding
                Converter="{StaticResource UnitConverter}"
                Mode="TwoWay"
                NotifyOnValidationError="true"
                Path="Value"
                RelativeSource="{RelativeSource AncestorType={x:Type local:UnitEditor}}"
                UpdateSourceTrigger="PropertyChanged">
                <Binding.ValidationRules>
                    <local:UnitValidationRule />
                </Binding.ValidationRules>
            </Binding>
        </dxe:TextEditBase.Text>
    </dxe:TextEdit>
</UserControl>